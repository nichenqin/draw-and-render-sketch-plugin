var that=this;function __skpm_run(key,context){that.context=context;var exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){new o.default(e,n(1),{identifier:"draw.and.render",x:0,y:0,width:1e3,height:750,blurredBackground:!0,onlyShowCloseButton:!0,hideTitleBar:!1,shouldKeepAround:!0,resizable:!1,handlers:{render:function(e){new a.Image({image:{base64:e},parent:s})}}})};var r,i=n(2),o=(r=i)&&r.__esModule?r:{default:r};var a=n(5),s=(n(6),a.getSelectedDocument().selectedPage)},function(e,t){e.exports="file://"+context.plugin.urlForResourceNamed("_webpack_resources/69f8edca3c7b05562cb416732faf804e.html").path()},function(e,t,n){"use strict";var r=n(3),i=n(4),o=COScript.currentCOScript(),a="webView:didChangeLocationWithinPageForFrame:";function s(e,t,n,r){n.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(t,e,NSLayoutRelationEqual,n,e,1,r))}function l(e,t,n){e.setTranslatesAutoresizingMaskIntoConstraints(!1),s(NSLayoutAttributeLeft,e,t,n[0]),s(NSLayoutAttributeTop,e,t,n[1]),s(NSLayoutAttributeRight,e,t,n[2]),s(NSLayoutAttributeBottom,e,t,n[3])}function u(e,t,n){var s,u,c=(n=n||{}).identifier||NSUUID.UUID().UUIDString(),d=NSThread.mainThread().threadDictionary();if(d[c]){(s=d[c]).makeKeyAndOrderFront(null);for(var p=s.contentView().subviews(),f=0;f<p.length;f++)p[f].isKindOfClass(WebView.class())&&(u=p[f]);if(!u)throw new Error("Tried to reuse panel but couldn't find the webview inside");return{panel:s,eval:u.stringByEvaluatingJavaScriptFromString,webView:u}}s=NSPanel.alloc().init();var g=n.width||240,S=n.height||180;s.setFrame_display(NSMakeRect(n.x||0,n.y||0,g,S),!0),s.setTitle(n.title||e.plugin.name()),n.hideTitleBar&&(s.setTitlebarAppearsTransparent(!0),s.setTitleVisibility(NSWindowTitleHidden)),n.onlyShowCloseButton&&(s.standardWindowButton(NSWindowMiniaturizeButton).setHidden(!0),s.standardWindowButton(NSWindowZoomButton).setHidden(!0));var h=s.standardWindowButton(NSWindowCloseButton);function w(){if(n.onPanelClose&&!1===n.onPanelClose())return;s.close(),d.removeObjectForKey(n.identifier),o.setShouldKeepAround(!1)}h.setCOSJSTargetFunction(w),h.setAction("callAction:"),s.setStyleMask(n.styleMask||(n.resizable?NSTexturedBackgroundWindowMask|NSTitledWindowMask|NSResizableWindowMask|NSClosableWindowMask|NSFullSizeContentViewWindowMask:NSTexturedBackgroundWindowMask|NSTitledWindowMask|NSClosableWindowMask|NSFullSizeContentViewWindowMask)),s.becomeKeyWindow(),s.setLevel(NSFloatingWindowLevel);var m=n.background||NSColor.whiteColor();if(s.setBackgroundColor(m),n.blurredBackground){var b=NSVisualEffectView.alloc().initWithFrame(NSMakeRect(0,0,g,S));b.setAppearance(NSAppearance.appearanceNamed(NSAppearanceNameVibrantLight)),b.setBlendingMode(NSVisualEffectBlendingModeBehindWindow),s.contentView().addSubview(b),l(b,s.contentView(),[0,0,0,0])}if(d[c]=s,!1!==n.shouldKeepAround&&o.setShouldKeepAround(!0),u=WebView.alloc().initWithFrame(NSMakeRect(0,n.hideTitleBar?-24:0,n.width||240,(n.height||180)-(n.hideTitleBar?0:24))),n.frameLoadDelegate||n.handlers){var y,N=n.frameLoadDelegate||{};if(n.handlers)N[a]=function(t,r){var o=t.windowScriptObject().evaluateWebScript("window.location.hash");if((o=i(o)).pluginAction&&o.actionId&&o.actionId!==y&&o.pluginAction in n.handlers){y=o.actionId;try{o.pluginArgs=JSON.parse(o.pluginArgs)}catch(e){}n.handlers[o.pluginAction].apply(e,o.pluginArgs)}};var v=new r(N);u.setFrameLoadDelegate_(v.getClassInstance())}if(n.uiDelegate){var C=new r(n.uiDelegate);u.setUIDelegate_(C.getClassInstance())}return n.blurredBackground?u.setDrawsBackground(!1):(u.setOpaque(!0),u.setBackgroundColor(m)),/^(?!http|localhost|www|file).*\.html?$/.test(t)&&(t=e.plugin.urlForResourceNamed(t).path()),u.setMainFrameURL_(t),s.contentView().addSubview(u),l(u,s.contentView(),[0,n.hideTitleBar?0:24,0,0]),s.center(),s.makeKeyAndOrderFront(null),{panel:s,eval:u.stringByEvaluatingJavaScriptFromString,webView:u,close:w}}u.clean=function(){o.setShouldKeepAround(!1)},e.exports=u},function(module,exports,__webpack_require__){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};module.exports=function(selectorHandlerDict,superclass){var uniqueClassName="MochaJSDelegate_DynamicClass_"+NSUUID.UUID().UUIDString(),delegateClassDesc=MOClassDescription.allocateDescriptionForClassWithName_superclass_(uniqueClassName,superclass||NSObject);delegateClassDesc.registerClass();var handlers={};if(this.setHandlerForSelector=function(selectorString,func){var handlerHasBeenSet=selectorString in handlers,selector=NSSelectorFromString(selectorString);if(handlers[selectorString]=func,!handlerHasBeenSet){for(var args=[],regex=/:/g;regex.exec(selectorString);)args.push("arg"+args.length);var dynamicFunction=eval("(function ("+args.join(", ")+") { return handlers[selectorString].apply(this, arguments); })");delegateClassDesc.addInstanceMethodWithSelector_function_(selector,dynamicFunction)}},this.removeHandlerForSelector=function(e){delete handlers[e]},this.getHandlerForSelector=function(e){return handlers[e]},this.getAllHandlers=function(){return handlers},this.getClass=function(){return NSClassFromString(uniqueClassName)},this.getClassInstance=function(){return NSClassFromString(uniqueClassName).new()},"object"===(void 0===selectorHandlerDict?"undefined":_typeof(selectorHandlerDict)))for(var selectorString in selectorHandlerDict)this.setHandlerForSelector(selectorString,selectorHandlerDict[selectorString])}},function(e,t,n){"use strict";e.exports=function(e){if(e=e.split("?")[1])return e=e.split("&").reduce(function(e,t){var n=t.split("=");return 2===n.length&&(e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])),e},{})}},function(e,t){e.exports=require("sketch")},function(e,t){e.exports=require("sketch/ui")}]);"default"===key&&"function"==typeof exports?exports(context):exports[key](context)}that.onRun=__skpm_run.bind(this,"default");